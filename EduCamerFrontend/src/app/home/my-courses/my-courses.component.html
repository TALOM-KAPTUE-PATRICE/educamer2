<div class="my-courses-container">
  <header class="page-header">
    <h1>Mes Cours</h1>
    <p>Reprenez votre apprentissage là où vous l'avez laissé.</p>
  </header>

  <div class="course-grid" *ngIf="myCourses$ | async as courses; else loading">
    <!-- ▼▼▼ CORRECTION ▼▼▼ -->
    <!-- On vérifie d'abord que 'courses' existe ET n'est pas vide -->
    <div *ngIf="courses && courses.length > 0; else noCourses">
      <app-course-card *ngFor="let course of courses" [course]="course" [isEnrolled]="true">
        <button mat-flat-button color="accent" class="continue-button">
          {{ course.progress && course.progress > 0 ? 'Continuer' : 'Commencer' }}
        </button>
      </app-course-card>
    </div>
    
    <ng-template #noCourses>
      <div class="empty-state">
        <p>Vous n'êtes inscrit à aucun cours pour le moment.</p>
        <a mat-flat-button color="primary" routerLink="/home/catalog">Explorer le catalogue</a>
      </div>
    </ng-template>
  </div>

  <ng-template #loading>
    <div class="loading-spinner"><mat-spinner></mat-spinner></div>
  </ng-template>
</div>