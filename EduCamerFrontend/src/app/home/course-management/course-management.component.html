<div class="management-container">
  <div class="header">
    <h1>Gestion de mes cours</h1>
    <button mat-raised-button color="primary" (click)="openCreateCourseDialog()">
      <mat-icon>add</mat-icon>
      Nouveau cours
    </button>
  </div>

  <!-- On sépare les cours publiés des brouillons -->
  <mat-tab-group>
    <mat-tab label="Mes Cours Publiés">
      <div class="course-list">
        <mat-card *ngFor="let course of publishedCourses" class="course-card">
          <img mat-card-image [src]="course.imageUrl || 'assets/welcome/course.svg'" alt="Image du cours">
          <mat-card-header>
            <mat-card-title>{{ course.title }}</mat-card-title>
            <!-- Ajout de la classe dynamique pour la couleur du statut -->
            <mat-card-subtitle [ngClass]="'status-' + course.status.toLowerCase()">
              {{ course.status === 'DRAFT' ? 'Brouillon' : 'Publié' }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-actions>
            <button mat-button color="primary" [routerLink]="['/home/course-editor', course.id]">
              <mat-icon>edit</mat-icon>ÉDITER
            </button>
            <!-- ▼▼▼ LA CORRECTION EST ICI ▼▼▼ -->
            <!-- On remplace le (click) par un [routerLink] qui navigue vers la page de suivi -->
            <button mat-button color="accent" [routerLink]="['/home/course-tracking', course.id]">
              <mat-icon>bar_chart</mat-icon>STATISTIQUES
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </mat-tab>

    <mat-tab label="Mes Cours en Brouillon">
      <div class="course-list">
        <mat-card *ngFor="let course of draftCourses" class="course-card">
          <img mat-card-image [src]="course.imageUrl || 'assets/welcome/course.svg'" alt="Image du cours">
          <mat-card-header>
            <mat-card-title>{{ course.title }}</mat-card-title>
            <!-- Ajout de la classe dynamique pour la couleur du statut -->
            <mat-card-subtitle [ngClass]="'status-' + course.status.toLowerCase()">
              {{ course.status === 'DRAFT' ? 'Brouillon' : 'Publié' }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-actions>
            <button mat-button color="primary" [routerLink]="['/home/course-editor', course.id]">
              <mat-icon>edit</mat-icon>ÉDITER
            </button>

            <span class="spacer"></span> <!-- Pour pousser le bouton supprimer à droite -->
            <button mat-icon-button color="warn" (click)="deleteCourse(course.id, course.title)"
              matTooltip="Supprimer le cours">
              <mat-icon>delete_forever</mat-icon>
            </button>
            <!-- ▼▼▼ LA CORRECTION EST ICI ▼▼▼ -->
            <button mat-button color="accent" [routerLink]="['/home/course-tracking', course.id]">
              <mat-icon>bar_chart</mat-icon>STATISTIQUES
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </mat-tab>

  </mat-tab-group>
</div>